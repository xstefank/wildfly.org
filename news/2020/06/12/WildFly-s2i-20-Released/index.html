<!DOCTYPE html>
<html>

<head>
  <script id="adobe_dtm" src="//www.redhat.com/dtm.js" type="text/javascript"></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>WildFly 20 S2I images have been released on quay.io</title>
  <meta name="description" content="">
  <link rel="me" href="https://fosstodon.org/@wildflyas" />
  <link rel="shortcut icon" type="image/png" href="/favicon.ico" >
  <link rel="stylesheet" href="/assets/css/main.css" />
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-40221748-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-40221748-1');
  </script>


</head>

<body class="WildFly 20 S2I images have been released on quay.io">
  <div class="content">
    <div class="header navigation">
  <div class="logo-wrapper">
    <a href="/"><img class="wf-logo" src="/assets/img/wildfly_icons_one-color-logo.png"></a>
  </div>
  <div class="nav-container">
    <nav>
      <div class="nav-mobile"><a id="nav-toggle" href="#!"><span></span></a></div>
      <ul class="nav-list">
        <li>
          <a href="/" class="">Home</a>
        </li>
        <li>
          <a href="/downloads/" class="">Downloads</a>
        </li>
        <li>
          <a href="/news/" class="active">News</a>
        </li>
        <li>
          <a href="/about/" class="">About</a>
        </li>
        <li>
          <a href="/contribute/" class="">Contribute</a>
        </li>
        <li>
            <a target="_blank" href="https://docs.wildfly.org">Docs</a>
        </li>
        <li>
          <a class="button-cta secondary" href="https://github.com/wildfly/wildfly/fork" target="_blank">Fork</a>
        </li>
      </ul>
    </nav>
  </div>
</div>

    <div class="post-page grid-wrapper">
  <div class="grid__item width-10-12">
    <h1 class="title">WildFly 20 S2I images have been released on quay.io</h1>
    
    <p class="byline">By Jean-François Denise | June 12, 2020</p>
  </div>
  <div class="grid__item width-10-12 doc-content">
    <div class="sect1">
<h2 id="wildfly-20-s2i-docker-images">WildFly 20 S2I Docker images</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The WildFly S2I (Source-to-Image) builder and runtime Docker images for WildFly 20 have been released on <a href="https://quay.io/organization/wildfly">quay.io/wildfly</a>.</p>
</div>
<div class="paragraph">
<p>Changes since the <a href="https://wildfly.org/news/2020/03/20/WildFly-s2i-19-released/">last release</a>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Upgraded <a href="https://www.keycloak.org/">Keycloak</a> client adapters to version 10.0.2.</p>
</li>
<li>
<p>Reduced the size of the image generated during s2i chained build template (image named <em>&lt;app&gt;-build-artifacts</em>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For a complete documentation on how to use these images using S2I, OpenShift and Docker,
refer to the WildFly S2I <a href="https://github.com/wildfly/wildfly-s2i/blob/wf-20.0/README.md">README</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="adding-the-imagestreams-and-template-to-openshift">Adding the imagestreams and template to OpenShift</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At some point the new images will be made available from the OpenShift catalog and image repository. But you can already use these images by adding them yourselves to your OpenShift cluster.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>WildFly S2I builder image stream:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>oc create -n myproject -f https://raw.githubusercontent.com/wildfly/wildfly-s2i/wf-20.0/imagestreams/wildfly-centos7.json</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>WildFly runtime image stream:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>oc create -n myproject -f https://raw.githubusercontent.com/wildfly/wildfly-s2i/wf-20.0/imagestreams/wildfly-runtime-centos7.json</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Chained build template:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>oc create -n myproject -f https://raw.githubusercontent.com/wildfly/wildfly-s2i/wf-20.0/templates/wildfly-s2i-chained-build-template.yml</code></pre>
</div>
</div>
<div class="paragraph">
<p>NB: If you import the image streams into your project, be sure to set the <em>ImageStreams Namespace</em> (<code>IMAGE_STREAM_NAMESPACE</code> argument) to your project namespace in the template. <em>openshift</em> being the default namespace.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="eclipse-microprofile-openapi-example">Eclipse Microprofile OpenAPI example</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Since version 19, <a href="https://docs.wildfly.org/20/">WildFly</a> implements a support for the
<a href="https://download.eclipse.org/microprofile/microprofile-open-api-1.0/microprofile-openapi-spec.html">Microprofile OpenAPI specification</a>.</p>
</div>
<div class="paragraph">
<p>We are here deploying the WildFly <a href="https://github.com/wildfly/quickstart/tree/20.0.0.Final/microprofile-openapi">microprofile-openapi</a> quickstart inside OpenShift.</p>
</div>
<div class="paragraph">
<p>In order to tailor WildFly to our use-case (jaxrs service)
we are using <a href="https://docs.wildfly.org/20/Admin_Guide.html#defined-galleon-layers">WildFly Galleon Layers</a> during s2i build
to construct a WildFly server composed of jaxrs and Microprofile OpenAPI (plus their required dependencies).</p>
</div>
<div class="sect2">
<h3 id="build-and-run-the-application">Build and run the application</h3>
<div class="paragraph">
<p>The quickstart is a jaxrs service that exposes a set of operations to manage a store inventory.
We are retrieving the service interface (HTTP operations, URL paths and data types) through the <code><code>openapi</code></code>
endpoint that WildFly exposes in the root context (eg: <code><code><a href="http://127.0.0.1:8080/openapi" class="bare">http://127.0.0.1:8080/openapi</a></code></code>).</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Build the application image:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>oc new-app wildfly-s2i-chained-build-template -p APPLICATION_NAME=openapi-app \
      -p GIT_REPO=https://github.com/wildfly/quickstart \
      -p GIT_CONTEXT_DIR=microprofile-openapi \
      -p GIT_BRANCH=20.0.0.Final \
      -p GALLEON_PROVISION_LAYERS=jaxrs,microprofile-openapi \
      -p IMAGE_STREAM_NAMESPACE=myproject \
      --build-env=MAVEN_ARGS_APPEND="-Dcom.redhat.xpaas.repo.jbossorg"</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Create an application from the application image:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>oc new-app myproject/openapi-app</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Expose the service:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>oc expose svc/openapi-app</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The OpenAPI service definition is exposed at the following well known location: <code><code>&lt;application route&gt;/openapi</code></code></p>
</li>
<li>
<p>From the service definition we can retrieve the HTTP operations and URL paths that the service supports.
For example, the HTTP GET sent to <code><code>&lt;application route&gt;/fruit</code></code> returns a JSON array containing the fruits present in the inventory.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Enjoy the Apples and Pineapples!</p>
</div>
</div>
</div>
</div>
  </div>
</div>



  </div>

  <div class="content project-footer">
  <div class="footer-section">
    <div class="logo-wrapper">
      <a href="/"><img class="wf-logo" src="/assets/img/wildfly_icons_one-color-logo.png"></a>
    </div>
  </div>
  <div class="grid-wrapper">
    <p class="grid__item width-3-12">WildFly is open. All dependencies of this project are available under the <a href='https://www.gnu.org/licenses/old-licenses/lgpl-2.1.en.html' target='_blank'>LGPL 2.1</a> or compatible license.<br/><br/>This website was built with <a href='https://jekyllrb.com/' target='_blank'>Jekyll</a> is hosted on <a href='https://pages.github.com/' target='_blank'>Github Pages</a> and is completely open source. If you want to make it better, <a href='https://github.com/wildfly/wildfly.org/fork' target='_blank'>fork it</a> and show us what you’ve got.</p>

    
      <div class="width-1-12 project-links">
        <strong>Navigation</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="/downloads">Downloads</a></li>
          
            <li><a href="https://docs.wildfly.org">Docs</a></li>
          
            <li><a href="https://github.com/wildfly/wildfly">Github</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <strong>Contribute</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://issues.jboss.org/browse/WFLY">Submit a bug</a></li>
          
            <li><a href="https://groups.google.com/forum/#!forum/wildfly">Join the forum</a></li>
          
            <li><a href="https://github.com/wildfly/wildfly/fork">Fork WildFly</a></li>
          
            <li><a href="https://twitter.com/WildFlyAS">Follow us</a></li>
          
        </ul>
      </div>
    
      <div class="width-1-12 project-links">
        <strong>Get Help</strong>
        <ul class="footer-links width-1-12">
          
            <li><a href="https://groups.google.com/forum/#!forum/wildfly">Join the forum</a></li>
          
            <li><a href="https://wildfly.zulipchat.com/">Join Zulip Chat</a></li>
          
        </ul>
      </div>
    

    
      <div class="width-6-12 more-links">
        <strong>Find more Red Hat Middleware Community Projects</strong>
        <ul class="footer-links">
          
            <li><a href="https://www.apiman.io/">APIMan</a></li>
          
            <li><a href="http://arquillian.org">Arquillian</a></li>
          
            <li><a href="https://github.com/ansible-middleware/wildfly">Ansible Collection for Wildfly</a></li>
          
            <li><a href="http://byteman.jboss.org/">Byteman</a></li>
          
            <li><a href="http://capedwarf.org/">CapeDwarf</a></li>
          
            <li><a href="https://github.com/alechenninger/chronicler">Chronicler</a></li>
          
            <li><a href="https://github.com/darcy-framework">Darcy</a></li>
          
            <li><a href="http://debezium.io/">Debezium</a></li>
          
            <li><a href="https://www.drools.org/">Drools</a></li>
          
            <li><a href="http://gatein.jboss.org/">GateIn</a></li>
          
            <li><a href="http://www.hawkular.org/">Hawkular</a></li>
          
            <li><a href="http://hawt.io/">Hawtio</a></li>
          
            <li><a href="http://hibernate.org/">Hibernate</a></li>
          
            <li><a href="http://www.infinispan.org/">Infinispan</a></li>
          
            <li><a href="https://developers.redhat.com/products/codeready-studio/overview">CodeReady Studio</a></li>
          
            <li><a href="http://forge.jboss.org/">JBoss Forge</a></li>
          
            <li><a href="https://github.com/jboss-logging">JBoss Logging</a></li>
          
            <li><a href="http://jbossremoting.jboss.org/">JBoss Remoting</a></li>
          
            <li><a href="https://www.jbpm.org/">jBPM</a></li>
          
            <li><a href="https://jsfunit.jboss.org/">JSFUnit</a></li>
          
            <li><a href="https://www.keycloak.org/">Keycloak</a></li>
          
            <li><a href="http://modcluster.io/">Mod Cluster</a></li>
          
            <li><a href="http://modeshape.jboss.org/">ModeShape</a></li>
          
            <li><a href="https://www.optaplanner.org/">OptaPlanner</a></li>
          
            <li><a href="https://quarkus.io/">Quarkus</a></li>
          
            <li><a href="http://resteasy.jboss.org/">RESTEasy</a></li>
          
            <li><a href="https://riftsaw.jboss.org/">Riftsaw</a></li>
          
            <li><a href="http://savara.jboss.org/">Savara</a></li>
          
            <li><a href="https://weld.cdi-spec.org/">Weld</a></li>
          
            <li><a href="http://arquillian.org/">Shrinkwrap</a></li>
          
            <li><a href="http://snowdrop.jboss.org/">Snowdrop</a></li>
          
            <li><a href="https://switchyard.jboss.org/">Switchyard</a></li>
          
            <li><a href="https://tattletale.jboss.org/">Tattletale</a></li>
          
            <li><a href="http://teiid.jboss.org/">Teiid</a></li>
          
            <li><a href="https://wildfly-security.github.io/wildfly-elytron/">WildFly Elytron</a></li>
          
            <li><a href="https://thorntail.io/">Thorntail</a></li>
          
            <li><a href="http://wise.jboss.org/">Wise</a></li>
          
            <li><a href="https://xnio.jboss.org/">XNIO</a></li>
          
        </ul>
      </div>
    
  </div>
</div>
  <div class="content redhat-footer">
  <div class="grid-wrapper">
    <span class="licence">
      <i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a>
    </span>
    <span class="redhat">
      Sponsored by
    </span>
    <span class="redhat-logo">
      <a href="https://www.redhat.com/" target="_blank"><img src="/assets/img/redhat_reversed.svg"></a>
    </span>
  </div>
</div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script type="text/javascript" src="/assets/javascript/mobile-nav.js"></script>
  <script type="text/javascript" src="/assets/javascript/random-color-picker.js"></script>
  <script type="text/javascript">
    if (("undefined" !== typeof _satellite) && ("function" === typeof _satellite.pageBottom)) {
        _satellite.pageBottom();
    }
  </script>
</body>

</html>
